"use strict";var form=document.forms[0];function submitLogin(){var r="";if(form.email.value||(error(form.email),r+="Missing email!"),form.password.value||(error(form.password),r&&(r+="<br />"),r+="Missing password!"),r)return displayError(r);var e={email:form.email.value,password:form.password.value};fetch("/login",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then(function(r){return r.ok?r.json():submitError(r)}).then(function(r){localStorage.token=r.token,window.location="/?token="+r.token}).catch(submitError)}function error(r){r.style.border="1px solid #F00"}function clearError(r){if("message"===r)return document.getElementById("error-message").style.visibility="hidden";r.style.border="1px solid #888"}function submitError(r,e){return 400<=r.status&&r.status<500?r.text().then(function(r){displayError(r)}):displayError(e||"There was a problem submitting your form. Please try again later.")}function displayError(r){var e=document.getElementById("error-message");e.innerHTML=r,e.style.visibility="visible"}