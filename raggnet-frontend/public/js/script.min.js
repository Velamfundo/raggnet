"use strict";var hash="";function page(e){this.url=e,this.render=function(){loadView(this.url)}}var Books=new page("/books"),Moocs=new page("/moocs"),ForYou=new page("/foryou"),More=new page("/more"),Home=new page("/");Home.render=addFeatured,More.render=loadMoreView,ForYou.render=addForYou;var routes={"/":Home,"/books":Books,"/moocs":Moocs,"/foryou":ForYou,"/more":More};function router(){if("more"===hash)goBack();else{var e=window.location.hash.slice(1).toLowerCase()||"/";routes[e].render()}hash=window.location.hash.slice(2)||""}var CS61a={name:"CS61A",tags:["Programming","Python","Scheme"],author:"John Denero",institution:"UC Berkeley",instShortName:"berkeley",price:100,featured:!0},CS61b={name:"CS61B",tags:["Data Structures","Java"],author:"Paul Hilfinger",institution:"UC Berkeley",instShortName:"berkeley",price:100},CS50={name:"CS50",tags:["Programming","C","Python","JavaScript"],author:"David J. Malan",institution:"Harvard University",instShortName:"harvard",price:50,featured:!0},CS51={name:"CS51",tags:["JavaScript","Node.js","Programming"],author:"David J. Malan",institution:"Harvard University",instShortName:"harvard",price:51},CS110={name:"CS110",tags:["Java","Algorithms & Design"],author:"Paul Blikstein",instShortName:"stanford",institution:"Stanford University",price:0,featured:!0},PWAs={name:"PWAs",author:"Samantha Aguilera",tags:["Web Development","JavaScript","HTML","CSS"],institution:"Google",type:"course",price:25.5,instShortName:"google"},SICP={name:"SICP",author:"Jay Sussman",tags:["Programming","Scheme","Lisp"],institution:"MIT",type:"book",price:14,instShortName:"mit"};function loadView(e){switch(e){case"/books":resourceDiv.id="books",search.value="Books";break;case"/moocs":resourceDiv.id="moocs",search.value="Online Courses";break;default:resourceDiv.id=search.value=""}return fetch(e).then(function(e){return e.json()}).then(function(e){addResources(e)}).catch(function(e){console.error(e)})}function loadMoreView(){headerDiv.className="header-more",footer.style.display="none",search.value="Categories",containerDiv.style.marginTop="20%",containerDiv.innerHTML=categories}var interests=["JavaScript"],resources=[CS50,CS61a,CS61b,CS51,CS110,PWAs],exploreBtn=document.getElementById("explore"),explorePop=document.getElementsByClassName("explorePop")[0],moocsBtn=document.getElementById("moocs"),booksBtn=document.getElementById("ebooks"),moreBtn=document.getElementById("more"),footer=document.getElementsByTagName("footer")[0],resourceDiv=document.getElementsByClassName("resource")[0],forYouBtn=document.getElementById("foryou"),forYouClicked=(exploreBtn=document.getElementById("explore"),!1),Categories={"Online courses":["Live","Certified","Sites"],"To do":["Libraries","Meetups","Forums","Conferences","Careers"],eBooks:["Read","Free","Order"]},categories="";Object.keys(Categories).forEach(function(e){var o=Categories[e];categories+='<div class="category">'+e+"</div><ul>";for(var r=0;r<o.length;)categories+='<li><button class="btn">'+o[r]+"</button></li>",++r<o.length&&(categories+="<hr>");categories+="</ul>"});var containerDiv=document.getElementsByClassName("container")[0],headerDiv=document.getElementsByTagName("header")[0],menuBtn=document.getElementById("menu"),search=document.getElementById("search");function extractArrayItems(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return e[0]+" & "+e[1];default:return e[0]+", "+extractArrayItems(e.slice(1,e.length))}}function forE(e,o){for(var r=0;r<e.length;r++)o(e[r])}function notify(e){var o=Date.parse(new Date);return e.startDate<=o&&e.endDate>=o?"Happening now!":o-Date.parse(e.approvedDate)<=2592e6?"New!":""}function addResources(e){var o=e.length,i=document.createElement("div");i.className="hs",resourceDiv.innerHTML="",i.style.setProperty("--total",o),e.forEach(function(e){var o=e.author,r=e.tags,t=document.createElement("div");t.className="card",t.innerHTML="<h2>"+e.name+"</h2>";var n=document.createElement("div");n.className="resource-meta";var a=document.createElement("div");a.className="author",a.innerHTML='<span id="authored-by">Written by</span><br>'+o;var s=document.createElement("div");s.className="tags",r.forEach(function(e){s.innerHTML+='<div class="tag">'+e+"</div>"}),t.style.backgroundColor="#ff4500",n.appendChild(a),n.appendChild(s),t.appendChild(n),i.appendChild(t)}),resourceDiv.appendChild(i)}function addFeatured(){resourceDiv.id="featured",search.value="Featured";var o=[];resources.forEach(function(e){e.featured&&o.push(e)}),addResources(o)}function addForYou(){resourceDiv.id="targeted",search.value="For you";var t=[];resources.forEach(function(e){for(var o=extractArrayItems(e.tags),r=0;r<interests.length;r++)-1<o.indexOf(interests[r])&&(t.push(e),r=interests.length)}),addResources(t)}function toggleBtn(){forYouClicked=!forYouClicked,exploreBtn.style.color=forYouClicked?(forYouBtn.style.color="#2364f3","#544948"):(forYouBtn.style.color="#544948","#2364f3")}function goBack(){switch(headerDiv.innerHTML="",containerDiv.innerHTML="",containerDiv.style.marginTop="",resourceDiv.id){case"moocs":search.value="Online courses";break;case"books":search.value="Books";break;default:search.value="Try courses and free eBooks"}headerDiv.appendChild(menuBtn),headerDiv.appendChild(search),containerDiv.appendChild(resourceDiv),footer.style.display="block"}forYouBtn.onclick=function(){forYouClicked||(toggleBtn(),window.location.hash="#/foryou")},exploreBtn.onclick=function(){forYouClicked?(toggleBtn(),window.location.hash=""):explorePop.style.display="block"},window.onclick=function(){event.target!=explorePop&&event.target!=exploreBtn&&(explorePop.style.display="none")},window.onscroll=function(){explorePop.style.display="none"},moocsBtn.onclick=function(){window.location.hash="#/moocs"},booksBtn.onclick=function(){window.location.hash="#/books"},moreBtn.onclick=function(){window.location.hash="#/more"},window.onload=router,window.onhashchange=router;