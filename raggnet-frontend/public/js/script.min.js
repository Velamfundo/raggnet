"use strict";function page(e){this.url=e,this.render=function(){loadView(this.url)}}var Books=new page("/books"),Moocs=new page("/moocs"),ForYou=new page("/foryou"),More=new page("/more");More.render=loadMoreView;var routes={"/books":Books,"/moocs":Moocs,"/foryou":ForYou,"/more":More};function router(){var e=window.location.hash.slice(1).toLowerCase()||"";routes[e].render()}var CS61a={name:"CS61A",category:"Programming",skills:["Python","Scheme"],authors:["John Denero"],institution:"UC Berkeley",instShortName:"berkeley",price:100,featured:!0},CS61b={name:"CS61B",category:"Data Structures",skills:["Java"],authors:["Paul Hilfinger"],institution:"UC Berkeley",instShortName:"berkeley",price:100},CS50={name:"CS50",category:"Programming",skills:["C","Python","JavaScript"],authors:["David J. Malan"],institution:"Harvard University",instShortName:"harvard",price:50,featured:!0},CS51={name:"CS51",category:"Programming",skills:["JavaScript","Node.js"],authors:["David J. Malan"],institution:"Harvard University",instShortName:"harvard",price:51},CS110={name:"CS110",category:"Algorithms & Design",skills:["Java"],authors:["Paul Blikstein"],instShortName:"stanford",institution:"Stanford University",price:0,featured:!0},PWAs={name:"PWAs",authors:["Samantha","Sam"],skills:["JavaScript","HTML","CSS"],category:"Web Development",institution:"Google",type:"course",price:25.5,instShortName:"google"},SICP={name:"SICP",authors:["Sussman","Abelsson"],skills:["Scheme","Lisp"],category:"Programming",institution:"MIT",type:"book",price:14,instShortName:"mit"};function loadView(e){switch(e){case"/books":resourceDiv.id="books",search.value="Books";break;case"/moocs":resourceDiv.id="courses",search.value="Online Courses";break;default:resourceDiv.id=search.value=""}return fetch(e).then(function(e){return e.json()}).then(function(e){addResources(e),console.log(e)}).catch(function(e){console.error(e)})}function loadMoreView(){headerDiv.innerHTML="",headerDiv.className="header-more",footer.style.display="none",search.value="Categories",headerDiv.appendChild(backBtn),headerDiv.appendChild(search),containerDiv.style.marginTop="12%",containerDiv.innerHTML=categories}var interests=["JavaScript"],resources=[CS50,CS61a,CS61b,CS51,CS110,PWAs],exploreBtn=document.getElementById("explore"),explorePop=document.getElementsByClassName("explorePop")[0],moocsBtn=document.getElementById("moocs"),booksBtn=document.getElementById("ebooks"),moreBtn=document.getElementById("more"),footer=document.getElementsByTagName("footer")[0],resourceDiv=document.getElementsByClassName("resource")[0],forYouBtn=document.getElementById("foryou"),forYouClicked=(exploreBtn=document.getElementById("explore"),!1),Categories={"Online courses":["Live","Certified","Sites"],"To do":["Libraries","Meetups","Forums","Conferences","Careers"],eBooks:["Read","Free","Order"]},categories="";Object.keys(Categories).forEach(function(e){var r=Categories[e];categories+='<div class="category">'+e+"</div><ul>";for(var o=0;o<r.length;)categories+='<li><button class="btn">'+r[o]+"</button></li>",++o<r.length&&(categories+="<hr>");categories+="</ul>"});var containerDiv=document.getElementsByClassName("container")[0],headerDiv=document.getElementsByTagName("header")[0],menuBtn=document.getElementById("menu"),backBtn=document.createElement("button");backBtn.className="btn",backBtn.id="back",backBtn.innerHTML="Back";var search=document.getElementById("search");function extractArrayItems(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return e[0]+" & "+e[1];default:return e[0]+", "+extractArrayItems(e.slice(1,e.length))}}function forE(e,r){for(var o=0;o<e.length;o++)r(e[o])}function notify(e){var r=Date.parse(new Date);return e.startDate<=r&&e.endDate>=r?"Happening now!":r-Date.parse(e.approvedDate)<=2592e6?"New!":""}function addResources(e){resourceDiv.innerHTML="",e.forEach(function(e){var r=e.skills?"Learn "+extractArrayItems(e.skills):"",o=extractArrayItems(e.authors),t=0===e.price?"Free":"$"+e.price,n=document.createElement("div");n.className="resource-widget";var a=document.createElement("div");a.className="header "+e.instShortName;var i=document.createElement("div");i.className="head",i.innerHTML='<div id="category">'+e.category+"</div>",i.innerHTML+='<div id="notify">'+notify(e)+"</div>";var s=document.createElement("div");s.className="main",s.innerHTML='<span id="name">'+e.name+"</span> <br>",s.innerHTML+=o+", <br>"+e.institution;var c=document.createElement("div");c.className="foot",c.innerHTML='<div id="price">'+t+"</div>",a.appendChild(i),a.appendChild(s),a.appendChild(c);var l=document.createElement("div");l.className="body",resourceDiv.appendChild(n),n.appendChild(a),n.appendChild(l),l.innerHTML=r+"<br>",e.prerequisites&&0<e.prerequisites.length&&(l.innerHTML+="Prerequisites: "+extractArrayItems(e.prerequisites))})}function addFeatured(){resourceDiv.id="featured",search.value="Featured";var r=[];resources.forEach(function(e){e.featured&&r.push(e)}),addResources(r)}function addForYou(){resourceDiv.id="targeted",search.value="For you";var t=[];resources.forEach(function(e){for(var r=extractArrayItems(e.skills),o=0;o<interests.length;o++)-1<r.indexOf(interests[o])&&(t.push(e),o=interests.length)}),addResources(t)}function toggleBtn(){forYouClicked=!forYouClicked,exploreBtn.style.color=forYouClicked?(forYouBtn.style.color="#0000ff","#544948"):(forYouBtn.style.color="#544948","#0000ff")}forYouBtn.onclick=function(){forYouClicked||(toggleBtn(),addForYou())},exploreBtn.onclick=function(){forYouClicked?(toggleBtn(),addFeatured()):explorePop.style.display="block"},window.onclick=function(){event.target!=explorePop&&event.target!=exploreBtn&&(explorePop.style.display="none")},window.onscroll=function(){explorePop.style.display="none"},moocsBtn.onclick=function(){window.location.hash="#/moocs"},booksBtn.onclick=function(){window.location.hash="#/books"},moreBtn.onclick=function(){window.location.hash="#/more"},backBtn.onclick=function(){switch(headerDiv.innerHTML="",containerDiv.innerHTML="",resourceDiv.id){case"courses":search.value="Online courses";break;case"books":search.value="Books";break;default:search.value="Try courses and free eBooks"}headerDiv.appendChild(menuBtn),headerDiv.appendChild(search),containerDiv.appendChild(resourceDiv),footer.style.display="block"},window.onload=addFeatured,window.onhashchange=router;