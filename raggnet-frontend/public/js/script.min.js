"use strict";var CS61a={name:"CS61A",category:"Programming",skills:["Python","Scheme"],authors:["John Denero"],institution:"UC Berkeley",instShortName:"berkeley",price:100,featured:!0},CS61b={name:"CS61B",category:"Data Structures",skills:["Java"],authors:["Paul Hilfinger"],institution:"UC Berkeley",instShortName:"berkeley",price:100},CS50={name:"CS50",category:"Programming",skills:["C","Python","JavaScript"],authors:["David J. Malan"],institution:"Harvard University",instShortName:"harvard",price:50,featured:!0},CS51={name:"CS51",category:"Programming",skills:["JavaScript","Node.js"],authors:["David J. Malan"],institution:"Harvard University",instShortName:"harvard",price:51},CS110={name:"CS110",category:"Algorithms & Design",skills:["Java"],authors:["Paul Blikstein"],instShortName:"stanford",institution:"Stanford University",price:0,featured:!0},PWAs={name:"PWAs",authors:["Samantha","Sam"],skills:["JavaScript","HTML","CSS"],category:"Web Development",institution:"Google",type:"course",price:25.5,instShortName:"google"},SICP={name:"SICP",authors:["Sussman","Abelsson"],skills:["Scheme","Lisp"],category:"Programming",institution:"MIT",type:"book",price:14,instShortName:"mit"};function updateView(e){return fetch(e).then(function(e){return e.json()}).then(function(e){addResources(e)}).catch(function(e){console.error(e)})}var interests=["JavaScript"],moocs=[CS50,CS61a,CS61b,CS51,CS110,PWAs],exploreBtn=document.getElementById("explore"),explorePop=document.getElementsByClassName("explorePop")[0],moocsBtn=document.getElementById("moocs"),booksBtn=document.getElementById("ebooks"),moreBtn=document.getElementById("more"),footer=document.getElementsByTagName("footer")[0],resourceDiv=document.getElementsByClassName("resource")[0],forYouBtn=document.getElementById("foryou"),forYouClicked=(exploreBtn=document.getElementById("explore"),!1),Categories={"Online courses":["Live","Certified","Sites"],"To do":["Libraries","Meetups","Forums","Conferences","Careers"],eBooks:["Read","Free","Order"]},categories="";Object.keys(Categories).forEach(function(e){var t=Categories[e];categories+='<div class="category">'+e+"</div><ul>";for(var r=0;r<t.length;)categories+='<li><button class="btn">'+t[r]+"</button></li>",++r<t.length&&(categories+="<hr>");categories+="</ul>"});var containerDiv=document.getElementsByClassName("container")[0],headerDiv=document.getElementsByTagName("header")[0],menuBtn=document.getElementById("menu"),backBtn=document.createElement("button");backBtn.className="btn",backBtn.id="back",backBtn.innerHTML="Back";var search=document.getElementById("search");function extractArrayItems(e){switch(e.length){case 0:return"";case 1:return e[0];case 2:return e[0]+" & "+e[1];default:return e[0]+", "+extractArrayItems(e.slice(1,e.length))}}function forE(e,t){for(var r=0;r<e.length;r++)t(e[r])}function notify(e){var t=Date.parse(new Date);return e.startDate<=t&&e.endDate>=t?"Happening now!":t-Date.parse(e.approvedDate)<=2592e6?"New!":""}function addResources(e){resourceDiv.innerHTML="",e.forEach(function(e){var t=e.skills?"Learn "+extractArrayItems(e.skills):"",r=extractArrayItems(e.authors),n=0===e.price?"Free":"$"+e.price,o=document.createElement("div");o.className="resource-widget";var a=document.createElement("div");a.className="header "+e.instShortName;var i=document.createElement("div");i.className="head",i.innerHTML='<div id="category">'+e.category+"</div>",i.innerHTML+='<div id="notify">'+notify(e)+"</div>";var s=document.createElement("div");s.className="main",s.innerHTML='<span id="name">'+e.name+"</span> <br>",s.innerHTML+=r+", <br>"+e.institution;var c=document.createElement("div");c.className="foot",c.innerHTML='<div id="price">'+n+"</div>",a.appendChild(i),a.appendChild(s),a.appendChild(c);var l=document.createElement("div");l.className="body",resourceDiv.appendChild(o),o.appendChild(a),o.appendChild(l),l.innerHTML=t+"<br>",e.prerequisites&&0<e.prerequisites.length&&(l.innerHTML+="Prerequisites: "+extractArrayItems(e.prerequisites))})}function addFeatured(){resourceDiv.id="featured",search.value="Featured";var t=[];moocs.forEach(function(e){e.featured&&t.push(e)}),addResources(t)}function addForYou(){resourceDiv.id="targeted",search.value="For you";var n=[];resources.forEach(function(e){for(var t=extractArrayItems(e.skills),r=0;r<interests.length;r++)-1<t.indexOf(interests[r])&&(n.push(e),r=interests.length)}),addResources(n)}function toggleBtn(){forYouClicked=!forYouClicked,exploreBtn.style.color=forYouClicked?(forYouBtn.style.color="#0000ff","#544948"):(forYouBtn.style.color="#544948","#0000ff")}forYouBtn.onclick=function(){forYouClicked||(toggleBtn(),addForYou())},exploreBtn.onclick=function(){forYouClicked?(toggleBtn(),addFeatured()):explorePop.style.display="block"},window.onclick=function(){event.target!=explorePop&&event.target!=exploreBtn&&(explorePop.style.display="none")},window.onscroll=function(){explorePop.style.display="none"},moocsBtn.onclick=function(){resourceDiv.id="courses",search.value="Online courses",updateView("/moocs")},booksBtn.onclick=function(){resourceDiv.id="books",search.value="Books",updateView("/books")},moreBtn.onclick=function(){headerDiv.innerHTML="",headerDiv.className="header-more",footer.style.display="none",search.value="Categories",headerDiv.appendChild(backBtn),headerDiv.appendChild(search),containerDiv.style.marginTop="12%",containerDiv.innerHTML=categories},backBtn.onclick=function(){switch(headerDiv.innerHTML="",containerDiv.innerHTML="",resourceDiv.id){case"courses":search.value="Online courses";break;case"books":search.value="Books";break;default:search.value="Try courses and free eBooks"}headerDiv.appendChild(menuBtn),headerDiv.appendChild(search),containerDiv.appendChild(resourceDiv),footer.style.display="block"},window.onload=addFeatured;